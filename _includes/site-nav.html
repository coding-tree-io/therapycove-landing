{% assign data_lang = page.lang | default: site.active_lang | default: site.default_lang | default: site.lang | default: 'el' %}
{% assign cove = site.data[data_lang].therapy_cove | default: site.data.therapy_cove %}
{% assign site_nav = cove.site_nav %}
{% assign current_lang = data_lang %}
{% assign switch_lang = "en" %}
{% if current_lang == "en" %}
  {% assign switch_lang = "el" %}
{% endif %}
{% assign switch_permalink = "/" %}
{% if page.permalink_lang and page.permalink_lang[switch_lang] %}
  {% assign switch_permalink = page.permalink_lang[switch_lang] %}
{% endif %}
{% assign switch_permalink = switch_permalink | remove_first: "/" %}
{% capture switch_href %}{{ site.baseurl }}/{% if switch_lang != site.default_lang %}{{ switch_lang }}/{% endif %}{% if switch_permalink != "" %}{{ switch_permalink }}{% endif %}{% endcapture %}
{% assign switch_href = switch_href | strip %}
{% assign show_lang_toggle = site.flags.show_lang_toggle %}
{% if show_lang_toggle == nil %}
  {% assign show_lang_toggle = true %}
{% endif %}
<header class="cove-nav bg-cove-ocean-flow/95 backdrop-blur-md border-b border-cove-ivory/60 shadow-sm">
  <div class="cove-shell cove-nav-inner">
    <a href="#home" class="cove-logo transition-transform duration-300 hover:-translate-y-0.5" aria-label="{{ site_nav.logo_alt }}">
        <img
          alt="{{ site_nav.logo_alt }}"
          src="{{ '/assets/images/log-vector.svg' | relative_url }}"
          width="1314"
          height="326"
          class="cove-logo-image"
        >
    </a>
    <input id="cove-nav-toggle" class="cove-nav-toggle" type="checkbox">
    <nav class="cove-nav-links" aria-label="Primary">
      {% for link in site_nav.links %}
      <a class="cove-nav-link transition-colors duration-200" href="{{ link.href }}">{{ link.label }}</a>
      {% endfor %}
    </nav>
    <div class="cove-nav-cta">
      {% if show_lang_toggle %}
      <a class="cove-nav-lang" href="{{ switch_href }}" data-lang-toggle data-base-href="{{ switch_href }}" aria-label="{{ site_nav.lang_toggle.aria_label }}">
        <span class="cove-nav-lang-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="9" fill="none" stroke="currentColor" stroke-width="1.5"></circle>
            <path d="M3 12h18M12 3c2.5 2.7 4 6.1 4 9s-1.5 6.3-4 9M12 3c-2.5 2.7-4 6.1-4 9s1.5 6.3 4 9" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
          </svg>
        </span>
        <span>{{ site_nav.lang_toggle.label }}</span>
      </a>
      {% endif %}
      <a class="cove-button cove-button--nav shadow-sm hover:shadow-soft transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cove-ocean-flow/40" href="{{ site_nav.cta.primary.href }}">{{ site_nav.cta.primary.label }}</a>
    </div>
    <label class="cove-nav-toggle-label" for="cove-nav-toggle" aria-label="Toggle navigation">
      <svg class="cove-nav-toggle-icon cove-nav-toggle-icon--menu" viewBox="0 0 24 24" aria-hidden="true">
        <line x1="5" y1="7" x2="19" y2="7"></line>
        <line x1="5" y1="12" x2="19" y2="12"></line>
        <line x1="5" y1="17" x2="19" y2="17"></line>
      </svg>
      <svg class="cove-nav-toggle-icon cove-nav-toggle-icon--close" viewBox="0 0 24 24" aria-hidden="true">
        <line x1="6" y1="6" x2="18" y2="18"></line>
        <line x1="18" y1="6" x2="6" y2="18"></line>
      </svg>
    </label>

    <div class="cove-nav-drawer">
      <div class="cove-nav-drawer-inner">
        <div class="cove-nav-drawer-header">
          <img
            alt="{{ site_nav.logo_alt }}"
            src="{{ '/assets/images/log-vector.svg' | relative_url }}"
            width="1314"
            height="326"
            class="cove-nav-drawer-logo"
          >
          <label class="cove-nav-close" for="cove-nav-toggle" aria-label="Close navigation">Ã—</label>
        </div>
        <nav class="cove-nav-drawer-links" aria-label="Mobile">
          {% for link in site_nav.links %}
          <a class="cove-nav-drawer-link transition-colors duration-200" href="{{ link.href }}">{{ link.label }}</a>
          {% endfor %}
        </nav>
        <div class="cove-nav-drawer-actions">
          {% if show_lang_toggle %}
          <a class="cove-nav-lang" href="{{ switch_href }}" data-lang-toggle data-base-href="{{ switch_href }}" aria-label="{{ site_nav.lang_toggle.aria_label }}">
            <span class="cove-nav-lang-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="9" fill="none" stroke="currentColor" stroke-width="1.5"></circle>
                <path d="M3 12h18M12 3c2.5 2.7 4 6.1 4 9s-1.5 6.3-4 9M12 3c-2.5 2.7-4 6.1-4 9s1.5 6.3 4 9" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
              </svg>
            </span>
            <span>{{ site_nav.lang_toggle.label }}</span>
          </a>
          {% endif %}
          <a class="cove-button cove-button--nav cove-button--lg shadow-sm hover:shadow-soft transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cove-ocean-flow/40" href="{{ site_nav.cta.primary.href }}">{{ site_nav.cta.primary.label }}</a>
        </div>
      </div>
    </div>
  </div>
</header>

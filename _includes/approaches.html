{% assign data_lang = page.lang | default: site.active_lang | default: site.default_lang | default: site.lang | default: 'el' %}
{% assign cove = site.data[data_lang].therapy_cove | default: site.data.therapy_cove %}
{% assign approaches = cove.approaches %}
{% assign site_nav = cove.site_nav %}
{% assign approaches_label = '' %}
{% for link in site_nav.links %}
  {% if link.href == '#approaches' %}
    {% assign approaches_label = link.label %}
  {% endif %}
{% endfor %}
{% if approaches_label == '' %}
  {% assign approaches_label = approaches.heading %}
{% endif %}
<section id="approaches" class="cove-section cove-approaches">
  <div class="cove-shell">
    {% assign approaches_summary = approaches.summary | strip %}
    {% assign approaches_first = approaches.tabs[0].description | strip %}
    <div class="section-intro section-intro--left" data-approaches-lock>
      {% if approaches_label != '' %}
      <p class="cove-eyebrow">{{ approaches_label }}</p>
      {% endif %}
      {% if approaches_summary != '' and approaches_summary != approaches_first %}
      <div class="cove-section-summary cove-rich-text">{{ approaches.summary | markdownify }}</div>
      {% endif %}
    </div>
    <div class="approaches-tabs">
      {% for tab in approaches.tabs %}
      <input
        id="approach-tab-{{ forloop.index0 }}"
        class="approaches-tab-toggle"
        type="checkbox"
        name="approaches-tabs"
        {% if forloop.first %}checked{% endif %}
      >
      {% endfor %}

      <div class="approaches-tab-list" role="list">
        {% for tab in approaches.tabs %}
        <label
          id="approach-tab-label-{{ forloop.index0 }}"
          class="approaches-tab ring-1 ring-cove-charcoal/5 hover:bg-white/60 transition"
          for="approach-tab-{{ forloop.index0 }}"
          role="button"
          aria-expanded="false"
          aria-controls="approach-panel-{{ forloop.index0 }}"
        >
          <span class="approaches-dot"></span>
          <span class="approaches-title">{{ tab.title }}</span>
          <div class="approaches-description cove-rich-text">{{ tab.description | markdownify }}</div>
          <span class="approaches-toggle" aria-hidden="true">
            <span class="approaches-toggle-icon"></span>
          </span>
        </label>
        {% endfor %}
      </div>

      <div class="approaches-panels">
        {% for tab in approaches.tabs %}
        <div
          id="approach-panel-{{ forloop.index0 }}"
          class="approaches-panel cove-surface ring-1 ring-white/40 shadow-soft"
          data-approach-index="{{ forloop.index0 }}"
          role="region"
          aria-labelledby="approach-tab-label-{{ forloop.index0 }}"
        >
          {% include picture.html
            src=tab.image.src
            alt=tab.image.alt
            widths="480,720,960,1280,1600"
            sizes="(min-width: 1024px) 700px, (min-width: 768px) 90vw, 100vw"
            width="960"
            height="540"
            class="approaches-image"
            loading="lazy"
          %}
        </div>
      {% endfor %}
    </div>
    </div>
  </div>
</section>

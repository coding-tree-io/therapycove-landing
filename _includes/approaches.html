{% assign data_lang = page.lang | default: site.active_lang | default: site.default_lang | default: site.lang | default: 'gr' %}
{% assign cove = site.data[data_lang].cove | default: site.data.cove %}
{% assign approaches = cove.approaches %}
{% assign approaches_section = cove.approaches_section %}
{% assign approach_ids = "psychotherapeutic-approaches|psychotherapy-benefits|find-the-right-therapist" | split: "|" %}
{% assign site_nav = cove.site_nav %}
{% assign approaches_label = '' %}
{% for link in site_nav.links %}
  {% if link.href == '#approaches' %}
    {% assign approaches_label = link.label %}
  {% endif %}
{% endfor %}
{% if approaches_label == '' %}
  {% assign approaches_label = approaches_section.heading %}
{% endif %}
<section id="approaches" class="cove-section cove-approaches">
  <div class="cove-shell">
    {% assign approaches_summary = approaches_section.summary | strip %}
    {% assign first_approach_id = approach_ids[0] %}
    {% assign approaches_first = approaches[first_approach_id].description | strip %}
    <div class="section-intro section-intro--left" data-approaches-lock>
      {% if approaches_label != '' %}
      <p class="cove-eyebrow">{{ approaches_label }}</p>
      {% endif %}
      {% if approaches_summary != '' and approaches_summary != approaches_first %}
      <div class="cove-section-summary cove-rich-text">{{ approaches_section.summary | markdownify }}</div>
      {% endif %}
    </div>
    <div class="approaches-tabs">
      <div class="approaches-tab-list">
        {% for tab_id in approach_ids %}
        {% assign tab = approaches[tab_id] %}
        <article class="approaches-tab-card ring-1 ring-cove-charcoal/5" data-approach-index="{{ forloop.index0 }}">
          <button
            id="approach-tab-button-{{ forloop.index0 }}"
            class="approaches-tab hover:bg-white/60 transition"
            type="button"
            aria-expanded="{% if forloop.first %}true{% else %}false{% endif %}"
            aria-controls="approach-content-{{ forloop.index0 }}"
          >
            <span class="approaches-dot"></span>
            <span class="approaches-title">{{ tab.title }}</span>
            <span class="approaches-toggle" aria-hidden="true">
              <svg class="approaches-toggle-icon" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                <path d="M4 6l4 4 4-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </span>
          </button>

          <div
            id="approach-content-{{ forloop.index0 }}"
            class="approaches-content"
            role="region"
            aria-labelledby="approach-tab-button-{{ forloop.index0 }}"
            {% unless forloop.first %}hidden{% endunless %}
          >
            <div class="approaches-description cove-rich-text">{{ tab.description | markdownify }}</div>
            <div class="approaches-inline-panel cove-surface ring-1 ring-white/40 shadow-soft">
              {% include picture.html
                src=tab.image.src
                alt=tab.image.alt
                widths="480,720,960,1280,1600"
                sizes="(max-width: 1024px) 100vw, 0px"
                width="960"
                height="540"
                class="approaches-image"
                loading="lazy"
              %}
            </div>
          </div>
        </article>
        {% endfor %}
      </div>

      <div class="approaches-panels" aria-hidden="true">
        {% for tab_id in approach_ids %}
        {% assign tab = approaches[tab_id] %}
        <div
          id="approach-panel-{{ forloop.index0 }}"
          class="approaches-panel cove-surface ring-1 ring-white/40 shadow-soft"
          data-approach-index="{{ forloop.index0 }}"
          role="region"
          aria-labelledby="approach-tab-label-{{ forloop.index0 }}"
        >
          {% include picture.html
            src=tab.image.src
            alt=tab.image.alt
            widths="480,720,960,1280,1600"
            sizes="(min-width: 1024px) 700px, (min-width: 768px) 90vw, 100vw"
            width="960"
            height="540"
            class="approaches-image"
            loading="lazy"
          %}
        </div>
      {% endfor %}
    </div>
    </div>
  </div>
</section>
